\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ist-thesis}[2016/02/02 IST Dissertation]

%% Process given options
\ProcessOptions\relax

%% Load additional packages and commands.
\RequirePackage{geometry}
\RequirePackage{graphicx}
\RequirePackage{textpos}
\RequirePackage{footmisc}
\RequirePackage{ifthen}
\RequirePackage{setspace}
\RequirePackage{tabu}
\RequirePackage[sf,big,raggedright,compact]{titlesec}
\RequirePackage[nottoc]{tocbibind}

\geometry{a4paper,margin=2.5cm}

% Define some basic simple macros
\def \thesisimage #1 {\def \@thesisimage{#1}}

\def \field #1 {\def \@field{#1}}
\def \supervisor #1 {\def \@supervisor{#1}}

\def \chairperson #1 {\def \@chairperson{#1}}
\def \committeesup #1 {\def \@committeesup{#1}}
\def \committeemembers #1 {\def \@committeemembers{#1}}

\edef \ist@indent {\the\parindent}

% Renew default fonts and font sizes
\renewcommand{\familydefault}{\sfdefault}
\renewcommand*\sfdefault{phv}
\linespread{1.5}

%\renewcommand{\footnotesize}{\fontsize{9pt}{11pt}\selectfont}
%\renewcommand{\footnotelayout}{\setstretch{1}}

% Change the style and format of the chapters
\titleformat{\chapter}[block]{\raggedleft\Huge}{\thechapter}{4\wordsep}{}[\titlerule]
\titlespacing{\chapter}{0ex}{\beforetitleunit}{4\aftertitleunit}

\titleformat*{\subsubsection}{\bfseries}
\titleformat*{\paragraph}{\bfseries}
\titleformat*{\subparagraph}{\bfseries}

% Re-implement the title page
\renewcommand{\maketitle}{\begin{titlepage}
\begin{textblock*}{5cm}(-.5cm,-1cm)
\noindent
\includegraphics[clip=true,trim=6cm 7cm 6cm 7cm,width=5cm]{IST_A_CMYK_POS}
\end{textblock*}
\centering

\vspace{6cm}

{\LARGE\textbf{\@title}}

\vfill

{\Large\textbf{\@author}}

\vfill

{\large Dissertation to obtain the Master of Science Degree in}

\bigskip

{\Large\textbf{\@field}}

\vfill

{\large Supervisor(s): \@supervisor}

\vfill

{\Large\textbf{Examination Committee}}

\bigskip

{ \large
\begin{tabular}{ll}
Chairperson: & \@chairperson\\
Supervisor: & \@committeesup\\
Members of the Committee: & \@committeemembers\\
\end{tabular}}

\vfill

{\Large\textbf{\@date}}
\end{titlepage}}

\newenvironment{keywords}{%
\cleardoublepage
\addcontentsline{toc}{chapter}{Keywords}
\chapter*{Keywords}
\large
\setlength{\parindent}{0cm}
}{\setlength{\parindent}{\ist@indent} \newpage}

\endinput
